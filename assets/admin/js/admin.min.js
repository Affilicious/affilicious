function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}!function(t){var a=new Array,e=new Array;t.fn.doAutosize=function(a){var e=t(this).data("minwidth"),i=t(this).data("maxwidth"),n="",o=t(this),r=t("#"+t(this).data("tester_id"));if(n!==(n=o.val())){var l=n.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");r.html(l);var s=r.width(),u=s+a.comfortZone>=e?s+a.comfortZone:e,d=o.width(),c=d>u&&u>=e||u>e&&i>u;c&&o.width(u)}},t.fn.resetAutosize=function(a){var e=t(this).data("minwidth")||a.minInputWidth||t(this).width(),i=t(this).data("maxwidth")||a.maxInputWidth||t(this).closest(".tagsinput").width()-a.inputPadding,n=t(this),o=t("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),letterSpacing:n.css("letterSpacing"),whiteSpace:"nowrap"}),r=t(this).attr("id")+"_autosize_tester";!t("#"+r).length>0&&(o.attr("id",r),o.appendTo("body")),n.data("minwidth",e),n.data("maxwidth",i),n.data("tester_id",r),n.css("width",e)},t.fn.addTag=function(i,n){return n=jQuery.extend({focus:!1,callback:!0},n),this.each(function(){var o=t(this).attr("id"),r=t(this).val().split(a[o]);if(""==r[0]&&(r=new Array),i=jQuery.trim(i),n.unique){var l=t(this).tagExist(i);1==l&&t("#"+o+"_tag").addClass("not_valid")}else var l=!1;if(""!=i&&1!=l){if(t("<span>").addClass("tag").append(t("<span>").text(i).append("&nbsp;&nbsp;"),t("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return t("#"+o).removeTag(escape(i))})).insertBefore("#"+o+"_addTag"),r.push(i),t("#"+o+"_tag").val(""),n.focus?t("#"+o+"_tag").focus():t("#"+o+"_tag").blur(),t.fn.tagsInput.updateTagsField(this,r),n.callback&&e[o]&&e[o].onAddTag){var s=e[o].onAddTag;s.call(this,i)}if(e[o]&&e[o].onChange){var u=r.length,s=e[o].onChange;s.call(this,t(this),r[u-1])}}}),!1},t.fn.removeTag=function(n){return n=unescape(n),this.each(function(){var o=t(this).attr("id"),r=t(this).val().split(a[o]);for(t("#"+o+"_tagsinput .tag").remove(),str="",i=0;i<r.length;i++)r[i]!=n&&(str=str+a[o]+r[i]);if(t.fn.tagsInput.importTags(this,str),e[o]&&e[o].onRemoveTag){var l=e[o].onRemoveTag;l.call(this,n)}}),!1},t.fn.tagExist=function(e){var i=t(this).attr("id"),n=t(this).val().split(a[i]);return jQuery.inArray(e,n)>=0},t.fn.importTags=function(a){var e=t(this).attr("id");t("#"+e+"_tagsinput .tag").remove(),t.fn.tagsInput.importTags(this,a)},t.fn.tagsInput=function(i){var o=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},i),r=0;return this.each(function(){if("undefined"==typeof t(this).attr("data-tagsinput-init")){t(this).attr("data-tagsinput-init",!0),o.hide&&t(this).hide();var i=t(this).attr("id");(!i||a[t(this).attr("id")])&&(i=t(this).attr("id","tags"+(new Date).getTime()+r++).attr("id"));var l=jQuery.extend({pid:i,real_input:"#"+i,holder:"#"+i+"_tagsinput",input_wrapper:"#"+i+"_addTag",fake_input:"#"+i+"_tag"},o);a[i]=l.delimiter,(o.onAddTag||o.onRemoveTag||o.onChange)&&(e[i]=new Array,e[i].onAddTag=o.onAddTag,e[i].onRemoveTag=o.onRemoveTag,e[i].onChange=o.onChange);var s='<div id="'+i+'_tagsinput" class="tagsinput"><div id="'+i+'_addTag">';if(o.interactive&&(s=s+'<input id="'+i+'_tag" value="" data-default="'+o.defaultText+'" />'),s+='</div><div class="tags_clear"></div></div>',t(s).insertAfter(this),t(l.holder).css("width",o.width),t(l.holder).css("min-height",o.height),t(l.holder).css("height",o.height),""!=t(l.real_input).val()&&t.fn.tagsInput.importTags(t(l.real_input),t(l.real_input).val()),o.interactive){if(t(l.fake_input).val(t(l.fake_input).attr("data-default")),t(l.fake_input).css("color",o.placeholderColor),t(l.fake_input).resetAutosize(o),t(l.holder).bind("click",l,function(a){t(a.data.fake_input).focus()}),t(l.fake_input).bind("focus",l,function(a){t(a.data.fake_input).val()==t(a.data.fake_input).attr("data-default")&&t(a.data.fake_input).val(""),t(a.data.fake_input).css("color","#000000")}),void 0!=o.autocomplete_url){autocomplete_options={source:o.autocomplete_url};for(attrname in o.autocomplete)autocomplete_options[attrname]=o.autocomplete[attrname];void 0!==jQuery.Autocompleter?(t(l.fake_input).autocomplete(o.autocomplete_url,o.autocomplete),t(l.fake_input).bind("result",l,function(a,e,n){e&&t("#"+i).addTag(e[0]+"",{focus:!0,unique:o.unique})})):void 0!==jQuery.ui.autocomplete&&(t(l.fake_input).autocomplete(autocomplete_options),t(l.fake_input).bind("autocompleteselect",l,function(a,e){return t(a.data.real_input).addTag(e.item.value,{focus:!0,unique:o.unique}),!1}))}else t(l.fake_input).bind("blur",l,function(a){var e=t(this).attr("data-default");return""!=t(a.data.fake_input).val()&&t(a.data.fake_input).val()!=e?a.data.minChars<=t(a.data.fake_input).val().length&&(!a.data.maxChars||a.data.maxChars>=t(a.data.fake_input).val().length)&&t(a.data.real_input).addTag(t(a.data.fake_input).val(),{focus:!0,unique:o.unique}):(t(a.data.fake_input).val(t(a.data.fake_input).attr("data-default")),t(a.data.fake_input).css("color",o.placeholderColor)),!1});t(l.fake_input).bind("keypress",l,function(a){return n(a)?(a.preventDefault(),a.data.minChars<=t(a.data.fake_input).val().length&&(!a.data.maxChars||a.data.maxChars>=t(a.data.fake_input).val().length)&&t(a.data.real_input).addTag(t(a.data.fake_input).val(),{focus:!0,unique:o.unique}),t(a.data.fake_input).resetAutosize(o),!1):void(a.data.autosize&&t(a.data.fake_input).doAutosize(o))}),l.removeWithBackspace&&t(l.fake_input).bind("keydown",function(a){if(8==a.keyCode&&""==t(this).val()){a.preventDefault();var e=t(this).closest(".tagsinput").find(".tag:last").text(),i=t(this).attr("id").replace(/_tag$/,"");e=e.replace(/[\s]+x$/,""),t("#"+i).removeTag(escape(e)),t(this).trigger("focus")}}),t(l.fake_input).blur(),l.unique&&t(l.fake_input).keydown(function(a){(8==a.keyCode||String.fromCharCode(a.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,\/]+/))&&t(this).removeClass("not_valid")})}}}),this},t.fn.tagsInput.updateTagsField=function(e,i){var n=t(e).attr("id");t(e).val(i.join(a[n]))},t.fn.tagsInput.importTags=function(n,o){t(n).val("");var r=t(n).attr("id"),l=o.split(a[r]);for(i=0;i<l.length;i++)t(n).addTag(l[i],{focus:!1,callback:!1});if(e[r]&&e[r].onChange){var s=e[r].onChange;s.call(n,n,l[i])}};var n=function(a){var e=!1;return 13==a.which||("string"==typeof a.data.delimiter?a.which==a.data.delimiter.charCodeAt(0)&&(e=!0):t.each(a.data.delimiter,function(t,i){a.which==i.charCodeAt(0)&&(e=!0)}),e)}}(jQuery);var _createClass=function(){function t(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,e,i){return e&&t(a.prototype,e),i&&t(a,i),a}}();jQuery(function(t){function a(){var t=null;return _.each(s.views,function(a){a.model&&a.model.attributes&&a.model.attributes.title==translations.container&&(t=a)}),t}function e(){var t=null;return _.each(s.views,function(a){a.templateVariables&&"_affilicious_product_variants"==a.templateVariables.base_name&&(t=a)}),t}function i(){var t=[];return _.each(s.views,function(a){a.templateVariables&&"enabled_attributes"==a.templateVariables.base_name&&t.push(a)}),t}function n(){var t=null;return _.each(s.views,function(a){a.templateVariables&&"_affilicious_product_enabled_attributes"==a.templateVariables.base_name&&(t=a)}),t}function o(){var e=a(),i=t('select[name="_affilicious_product_type"]'),n=i.val(),o=e.$el.find('a[data-id="'+translations.variants.trim().toLowerCase()+'"]').parent(),r=e.$el.find('a[data-id="shops"]').parent();"complex"===n?(o.show(),r.hide()):(o.hide(),r.show())}var r=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"hallo",value:function(){return"Hallo"}}]),t}(),l=new r;l.hallo();var s=window.carbon;if("undefined"==typeof s.fields)return!1;var u=a();u.$el.find('select[name="_affilicious_product_type"]').ready(o),u.$el.on('change select[name="_affilicious_product_type"]',o);var d=e(),c=n();d.model.on("change:value",function(){var t=i();console.log(window.carbon);var a=c.model.get("value");_.each(t,function(t){t.model.set("value",a)})}),c.model.on("change:value",function(){var t=i();console.log(window.carbon);var a=c.model.get("value");_.each(t,function(t){t.model.set("value",a)})})}),window.carbon=window.carbon||{},function(t){var a=window.carbon;return"undefined"!=typeof a.fields&&(a.fields.Model.Tags=a.fields.Model.extend({initialize:function(){a.fields.Model.prototype.initialize.apply(this)}}),void(a.fields.View.Tags=a.fields.View.extend({initialize:function(){a.fields.View.prototype.initialize.apply(this),this.on("field:rendered",this.initField)},initField:function(){var a=this;t(".aff-tags").tagsInput({width:"100%",height:"auto",defaultText:translations.addTag,interactive:!0,delimiter:";",minChars:1,maxChars:100,placeholderColor:"#666666",onChange:function(){a.model.set("value",t('input[name="'+a.templateVariables.name+'"]').val())}})}})))}(jQuery),jQuery(function(t){var a,e=t("#product_image_gallery"),i=t("#product_images_container").find("ul.product_images");t(".add_product_images").on("click","a",function(n){var o=t(this);return n.preventDefault(),a?void a.open():(a=wp.media.frames.product_gallery=wp.media({title:o.data("choose"),button:{text:o.data("update")},states:[new wp.media.controller.Library({title:o.data("choose"),filterable:"all",multiple:!0})]}),a.on("select",function(){var t=a.state().get("selection"),n=e.val();t.map(function(t){if(t=t.toJSON(),t.id){n=n?n+","+t.id:t.id;var a=t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;i.append('<li class="image" data-attachment_id="'+t.id+'"><img src="'+a+'" /><ul class="actions"><li><a href="#" class="delete" title="'+o.data("delete")+'">'+o.data("text")+"</a></li></ul></li>")}}),e.val(n)}),void a.open())}),i.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,a){a.item.css("background-color","#f6f6f6")},stop:function(t,a){a.item.removeAttr("style")},update:function(){var a="";t("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var e=t(this).attr("data-attachment_id");a=a+e+","}),e.val(a)}}),t("#product_images_container").on("click","a.delete",function(){t(this).closest("li.image").remove();var a="";return t("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var e=t(this).attr("data-attachment_id");a=a+e+","}),e.val(a),t("#tiptip_holder").removeAttr("style"),t("#tiptip_arrow").removeAttr("style"),!1})});