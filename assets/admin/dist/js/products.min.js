!function e(t,a,i){function r(o,l){if(!a[o]){if(!t[o]){var u="function"==typeof require&&require;if(!l&&u)return u(o,!0);if(n)return n(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var c=a[o]={exports:{}};t[o][0].call(c.exports,function(e){var a=t[o][1][e];return r(a||e)},c,c.exports,e,t,a,i)}return a[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();jQuery(function(e){var t=window.carbon;if(void 0===t.fields)return!1;var a=function(){function e(){i(this,e)}return r(e,null,[{key:"getContainerView",value:function(){var e=null;return _.each(t.views,function(t){t.model&&t.model.attributes&&t.model.attributes.title==affProductTranslations.container&&(e=t)}),e}},{key:"getVariantsView",value:function(){var e=null;return _.each(t.views,function(t){t.templateVariables&&"_affilicious_product_variants"==t.templateVariables.base_name&&(e=t)}),e}},{key:"getTypeView",value:function(){var e=null;return _.each(t.views,function(t){t.templateVariables&&"_affilicious_product_type"==t.templateVariables.base_name&&(e=t)}),e}},{key:"getEnabledAttributesView",value:function(){var e=null;return _.each(t.views,function(t){t.templateVariables&&"_affilicious_product_enabled_attributes"==t.templateVariables.base_name&&(e=t)}),e}},{key:"getVariantEnabledAttributesViews",value:function(){var e=[];return _.each(t.views,function(t){t.templateVariables&&"enabled_attributes"==t.templateVariables.base_name&&e.push(t)}),e}}]),e}(),n=function(){function e(){i(this,e);var t=a.getTypeView(),r=a.getVariantsView(),n=a.getEnabledAttributesView();t&&(t.$el.ready(this.toggleTabs),t.model.on("change:value",this.toggleTabs)),r&&(r.$el.ready(this.toggleAttributes),r.model.on("change:value",this.toggleAttributes)),n&&(n.$el.ready(this.toggleAttributes),n.model.on("change:value",this.toggleAttributes))}return r(e,[{key:"toggleTabs",value:function(){var e=a.getContainerView(),t=a.getTypeView(),i=t.model.get("value"),r=e.$el.find('a[data-id="'+affProductTranslations.variants.trim().toLowerCase()+'"]').parent(),n=e.$el.find('a[data-id="'+affProductTranslations.shops.trim().toLowerCase()+'"]').parent();"complex"===i?(r.show(),n.hide()):(r.hide(),n.show())}},{key:"toggleAttributes",value:function(){var e=a.getEnabledAttributesView(),t=a.getVariantEnabledAttributesViews(),i=e.model.get("value"),r=!0,n=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var s=l.value;s.model.set("value",i),s.$el.find("input").val(i)}}catch(e){n=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}}}]),e}();window.affiliciousProduct=new n}),jQuery(function(e){var t,a=e("#product_image_gallery"),i=e("#product_images_container").find("ul.product_images");e(".add_product_images").on("click","a",function(r){var n=e(this);if(r.preventDefault(),t)return void t.open();t=wp.media.frames.product_gallery=wp.media({title:n.data("choose"),button:{text:n.data("update")},states:[new wp.media.controller.Library({title:n.data("choose"),filterable:"all",multiple:!0})]}),t.on("select",function(){var e=t.state().get("selection"),r=a.val();e.map(function(e){if(e=e.toJSON(),e.id){r=r?r+","+e.id:e.id;var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;i.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+n.data("delete")+'">'+n.data("text")+"</a></li></ul></li>")}}),a.val(r)}),t.open()}),i.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(){var t="";e("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var a=e(this).attr("data-attachment_id");t=t+a+","}),a.val(t)}}),e("#product_images_container").on("click","a.delete",function(){e(this).closest("li.image").remove();var t="";return e("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var a=e(this).attr("data-attachment_id");t=t+a+","}),a.val(t),e("#tiptip_holder").removeAttr("style"),e("#tiptip_arrow").removeAttr("style"),!1})})},{}]},{},[1]);