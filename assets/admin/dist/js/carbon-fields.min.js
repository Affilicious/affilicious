!function e(i,t,a){function n(l,o){if(!t[l]){if(!i[l]){var s="function"==typeof require&&require;if(!o&&s)return s(l,!0);if(r)return r(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var u=t[l]={exports:{}};i[l][0].call(u.exports,function(e){var t=i[l][1][e];return n(t||e)},u,u.exports,e,i,t,a)}return t[l].exports}for(var r="function"==typeof require&&require,l=0;l<a.length;l++)n(a[l]);return n}({1:[function(e,i,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var n=e("./views/image-gallery"),r=a(n),l=e("./views/tags"),o=a(l);window.carbon=window.carbon||{},function(){var e=window.carbon;if(void 0===e.fields)return!1;e.fields.View.ImageGallery=r.default,e.fields.View.Tags=o.default}()},{"./views/image-gallery":2,"./views/tags":3}],2:[function(e,i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=carbon.fields.View.Image.extend({events:_.extend({},carbon.fields.View.prototype.events,{"click .c2_open_media":"openMedia","click .carbon-image-remove":"removeImage"}),initialize:function(){carbon.fields.View.prototype.initialize.apply(this),this.on("field:beforeRender",this.loadDescriptionTemplate),this.on("field:rendered",this.sortableImages),this.listenTo(this.model,"change:images",this.updateInput),this.listenTo(this.model,"change:value",this.render)},sortableImages:function(){var e=this,i=this.$("ul.carbon-image-gallery");i.sortable({items:"li.carbon-image",cursor:"move",helper:"clone",scrollSensitivity:42,forcePlaceholderSize:!0,opacity:.75,forceHelperSize:!1,placeholder:"carbon-sortable-placeholder",update:function(){var t=[];i.find("li.carbon-image").each(function(){var e=$(this),i=e.attr("data-image-value"),a=e.find("img").attr("src");t.push({value:i,url:a})}),e.model.set("images",t)}})},openMedia:function(e){var i=this,t=this.model.get("type"),a=(this.model.get("images"),this.model.get("window_button_label")),n=this.model.get("window_label"),r=this.model.get("type_filter"),l=this.model.get("value_type"),o={};o[t]=wp.media.frames.crbMediaField=wp.media({title:n||crbl10n.title,library:{type:r},button:{text:a},multiple:!0});var s=o[t];s.on("select",function(){var e=s.state().get("selection").toJSON(),t=_.clone(i.model.get("images"));_.each(e,function(e){t.push({value:e[l],url:e.url})}),i.model.set("images",t)}),s.open(),e.preventDefault()},updateInput:function(e){console.log(e);var i=this.$("input.carbon-image-gallery-field"),t=e.get("images"),a=_.map(t,function(e){return e.value}),n=a.join();i.val(n).trigger("change")},removeImage:function(e){for(var i=this.$(e.currentTarget),t=i.parents("ul.carbon-image-gallery").children(),a=i.parents("li.carbon-image"),n=_.clone(this.model.get("images")),r=t.index(a),l=[],o=0;o<n.length;o++)o!=r&&l.push(n[o]);this.model.set("images",l)}})},{}],3:[function(e,i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=carbon.fields.View.extend({initialize:function(){carbon.fields.View.prototype.initialize.apply(this),this.on("field:rendered",this.initField)},initField:function(){var e=this;this.$el.find(".aff-tags").tagsInput({width:"100%",height:"auto",defaultText:affCarbonFieldsTranslations.addTag,interactive:!0,delimiter:";",minChars:1,maxChars:100,placeholderColor:"#666666",onChange:function(){e.model.set("value",e.$el.find('input[name="'+e.templateVariables.name+'"]').val())}})}})},{}]},{},[1]);