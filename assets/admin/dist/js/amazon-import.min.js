!function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r||e)},d,d.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=e("./model/search"),o=i(n),a=e("./view/search"),s=i(a),l=new o.default;new s.default({model:l}).render()},{"./model/search":6,"./view/search":11}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=Backbone.Model.extend({defaults:{term:"",type:"keywords",category:"all",loading:!1},submit:function(){this.set("loading",!0),this.trigger("aff:amazon-import:search:search-form:submit",this)},done:function(){this.set("loading",!1),this.trigger("aff:amazon-import:search:search-form:done",this)}});r.default=i},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=Backbone.Model.extend({defaults:{loading:!1,noResults:!1},load:function(){this.set("loading",!0),this.trigger("aff:amazon-import:search:load-more:load",this)},done:function(){this.set("loading",!1),this.trigger("aff:amazon-import:search:load-more:done",this)},noResults:function(){this.set({loading:!1,noResults:!0}),this.trigger("aff:amazon-import:search:load-more:no-results",this)}});r.default=i},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=Backbone.Model.extend({});r.default=i},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("./search-results-item"),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=Backbone.Collection.extend({model:n.default});r.default=o},{"./search-results-item":4}],6:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./search-form"),o=i(n),a=e("./search-load-more"),s=i(a),l=e("./search-results"),u=i(l),d=Backbone.Model.extend({defaults:{started:!1,action:"aff_product_admin_amazon_search",page:1},initialize:function(e){this.form=new o.default,this.results=new u.default,this.loadMore=new s.default,this.page=e&&e.page?e.page:1,this.form.on("aff:amazon-import:search:search-form:submit",this.start,this),this.loadMore.on("aff:amazon-import:search:load-more:load",this.load,this)},start:function(){var e=this;null!==this.form.get("term")&&(this.set("page",1),this.results.url=this._buildUrl(),this.results.fetch().done(function(){e.set("started",!0),e.form.done()}))},load:function(){var e=this;this.set("page",this.get("page")+1),this.results.url=this._buildUrl(),this.results.fetch({remove:!1}).done(function(){e.loadMore.done()})},_buildUrl:function(){return affAdminAmazonImportUrls.ajax+"?action="+this.get("action")+"&term="+this.form.get("term")+"&type="+this.form.get("type")+"&category="+this.form.get("category")+"&page="+this.get("page")}});r.default=d},{"./search-form":2,"./search-load-more":3,"./search-results":5}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=Backbone.View.extend({el:".aff-amazon-import-search-form",events:{change:"change",submit:"submit"},initialize:function(){this.model.on("change",this.render,this)},render:function(){var e=jQuery("#aff-amazon-import-search-form-template").html(),t=_.template(e);return this.$el.html(t(this.model.attributes)),this},submit:function(e){e.preventDefault(),this.change(),this.model.submit()},change:function(){var e=this.$el.find('input[name="term"]').val(),t=this.$el.find('select[name="type"]').val(),r=this.$el.find('select[name="category"]').val();this.model.set({term:e,type:t,category:r})}});r.default=i},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=Backbone.View.extend({el:".aff-amazon-import-load-more",events:{"click .aff-amazon-import-load-more-button":"load"},initialize:function(){this.model.on("change",this.render,this)},render:function(){var e=jQuery("#aff-amazon-import-load-more-template").html(),t=_.template(e);return this.$el.html(t(this.model.attributes)),this},load:function(){this.model.load()}});r.default=i},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=Backbone.View.extend({tagName:"div",className:"",events:{"click .aff-amazon-import-search-results-item-variants-show-all":"showAll"},initialize:function(){this.model.on("change",this.render,this)},render:function(){var e=jQuery("#aff-amazon-import-search-results-item-template").html(),t=_.template(e);return this.setElement(t(this.model.attributes)),this},showAll:function(e){e.preventDefault(),this.$el.find(".aff-amazon-import-search-results-item-variants-show-all").hide(),this.$el.find(".aff-amazon-import-search-results-item-variants-item").show()}});r.default=i},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("./search-results-item"),n=function(e){return e&&e.__esModule?e:{default:e}}(i),o=Backbone.View.extend({el:".aff-amazon-import-search-results",initialize:function(e){var t=this;this.collection=e.collection,this.collection.bind("reset",function(){return t.render()}),this.collection.bind("add",function(){return t.render()}),this.collection.bind("remove",function(){return t.render()}),this.collection.bind("sync",function(){return t.render()})},render:function(){this._addAll()},_addAll:function(){this.$el.empty(),this.collection.forEach(this._addOne,this)},_addOne:function(e){var t=new n.default({model:e});this.$el.append(t.render().el)}});r.default=o},{"./search-results-item":9}],11:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("./search-form"),o=i(n),a=e("./search-load-more"),s=i(a),l=e("./search-results"),u=i(l),d=Backbone.View.extend({el:".aff-amazon-import-search",initialize:function(){this.form=new o.default({model:this.model.form}),this.results=new u.default({collection:this.model.results}),this.loadMore=new s.default({model:this.model.loadMore}),this.model.on("change",this.render,this)},render:function(){return this.form.render(),this.results.render(),this.model.get("started")&&this.loadMore.render(),this}});r.default=d},{"./search-form":7,"./search-load-more":8,"./search-results":10}]},{},[1]);